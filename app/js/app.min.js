!function(){"use strict";document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".comments-wrapper"),e=new Date;function n(){if(!r(username)&&!r(content)){var n=function(t){if(t>e)return i(t);if(e-t<=864e5)return"Сегодня, в ".concat(o(e.getHours()),":").concat(o(e.getMinutes()));if(e-t<=1728e5)return"Вчера, в ".concat(o(e.getHours()),":").concat(o(e.getMinutes()));return i(t)}(date.value?new Date(date.value):e),c=document.createElement("article");c.classList.add("comment"),c.innerHTML='\n\t\t\t<p class="comment__username">'.concat(username.value,'<span class="comment__date">').concat(n,'</span></p>\n\n\t\t\t<p class="comment__content">').concat(content.value,'</p>\n\n\t\t\t<div class="actions">\n\t\t\t\t<a class="actions__icon actions__icon_like" data-isliked="false"><span class="actions__counter">0</span><i class="fa fa-heart" aria-hidden="true"></i></a>\n\t\t\t\t<a class="actions__icon actions__icon_delete"><i class="fa fa-trash-o" aria-hidden="true"></i></a>\n\t\t\t</div>\n\t\t'),t.append(c),username.value="",content.value="",date.value=e.toLocaleDateString("en-CA"),a(username),a(content),date.classList.remove("comments-form__input-active")}}function a(t){if(t.value)return t.classList.add("comments-form__input-active"),t.classList.remove("comments-form__error-input"),void c(t);t.classList.remove("comments-form__input-active")}function c(t){t.classList.remove("comments-form__error-input"),t.removeAttribute("placeholder")}function r(t){return t.value?(c(t),!1):(function(t,e){t.setAttribute("placeholder",e),t.value="",t.classList.add("comments-form__error-input")}(t,"Поле не должно быть пустым"),!0)}function o(t){return t.toString().padStart(2,"0")}function i(t){return[o(t.getDate()),o(t.getMonth()+1),t.getFullYear()].join(".")}date.value=e.toLocaleDateString("en-CA"),document.querySelector(".app-comments").addEventListener("click",(function(t){if(t.target.closest(".actions__icon_like")){var e=t.target.closest(".actions__icon_like");return c=(a=e).querySelector(".actions__counter"),r=function(t){switch(t.toLowerCase().trim()){case"true":return!0;case"false":return!1;default:return}}(a.getAttribute("data-isliked")),c.innerHTML=r?Number(c.innerHTML)-1:Number(c.innerHTML)+1,void a.setAttribute("data-isliked",!r)}var a,c,r;if(t.target.closest(".actions__icon_delete")){var o=t.target.closest(".comment");o.remove()}else{t.target.closest("#submit_comment")&&n()}})),username.addEventListener("input",(function(t){a(t.target)})),content.addEventListener("input",(function(t){a(t.target)})),date.addEventListener("input",(function(t){a(t.target)})),comment_form.addEventListener("keydown",(function(t){13==t.keyCode&&(t.preventDefault(),n())}))}))}();